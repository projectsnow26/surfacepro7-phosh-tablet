# yaml-language-server: $schema=https://schema.blue-build.org/recipe-v1.json

name: fedora-phosh-surface
description: Fedora Atomic with Phosh shell optimized for Microsoft Surface devices
base-image: quay.io/fedora/fedora-bootc
image-version: "42"

modules:
  # ============================================================================
  # STAGE 1: Prepare Surface Repository
  # ============================================================================
  - type: script
    snippets:
      # Import the GPG key properly to avoid dnf errors later
      - rpm --import https://pkg.surfacelinux.com/fedora/linux-surface.pub
      # Download the repo file
      - curl -L -o /etc/yum.repos.d/linux-surface.repo https://pkg.surfacelinux.com/fedora/linux-surface.repo

  # ============================================================================
  # STAGE 2: Install Phosh & Core Packages (Standard Fedora Kernel)
  # ============================================================================
  - type: dnf
    install:
      install-weak-deps: false
      packages:
        # Core Phosh
        - phosh
        - phoc
        - squeekboard
        - gdm
        
        # GNOME Apps & Utils
        - gnome-session
        - gnome-settings-daemon
        - gnome-control-center
        - gnome-software
        - gnome-console
        - nautilus
        - epiphany
        - gnome-contacts
        - gnome-weather
        - gnome-calculator
        
        # Hardware
        - NetworkManager-wifi
        - bluez
        -
